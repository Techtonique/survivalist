.. _release_notes_0_15:

What's new in 0.15
==================

survivalist 0.15.0 (2021-03-20)
-----------------------------------

This release adds support for scikit-learn 0.24 and Python 3.9.
survivalist now requires at least pandas 0.25 and scikit-learn 0.24.
Moreover, if :class:`survivalist.ensemble.GradientBoostingSurvivalAnalysis`.
or :class:`survivalist.ensemble.ComponentwiseGradientBoostingSurvivalAnalysis`
are fit with ``loss='coxph'``,   `predict_cumulative_hazard_function` and
`predict_survival_function` are now available.
:func:`survivalist.metrics.cumulative_dynamic_auc` now supports evaluating
time-dependent predictions, for instance for a :class:`survivalist.ensemble.RandomSurvivalForest`
as illustrated in the
:ref:`User Guide </user_guide/evaluating-survival-models.ipynb#Using-Time-dependent-Risk-Scores>`.

Bug fixes
^^^^^^^^^
- Allow passing pandas data frames to all ``fit`` and ``predict`` methods (#148).
- Allow sparse matrices to be passed to
  :meth:`survivalist.ensemble.GradientBoostingSurvivalAnalysis.predict`.
- Fix example in user guide using GridSearchCV to determine alphas for CoxnetSurvivalAnalysis (#186).

Enhancements
^^^^^^^^^^^^
- Add score method to :class:`survivalist.meta.Stacking`,
  :class:`survivalist.meta.EnsembleSelection`, and
  :class:`survivalist.meta.EnsembleSelectionRegressor` (#151).
- Add support for `predict_cumulative_hazard_function` and
  `predict_survival_function` to :class:`survivalist.ensemble.GradientBoostingSurvivalAnalysis`.
  and :class:`survivalist.ensemble.ComponentwiseGradientBoostingSurvivalAnalysis`
  if model was fit with ``loss='coxph'``.
- Add support for time-dependent predictions to :func:`survivalist.metrics.cumulative_dynamic_auc`
  See the :ref:`User Guide </user_guide/evaluating-survival-models.ipynb#Using-Time-dependent-Risk-Scores>`
  for an example (#134).

Backwards incompatible changes
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
- The score method of :class:`survivalist.linear_model.IPCRidge`,
  :class:`survivalist.svm.FastSurvivalSVM`, and :class:`survivalist.svm.FastKernelSurvivalSVM`
  (if ``rank_ratio`` is smaller than 1) now converts predictions on log(time) scale
  to risk scores prior to computing the concordance index.
- Support for cvxpy and cvxopt solver in :class:`survivalist.svm.MinlipSurvivalAnalysis`
  and :class:`survivalist.svm.HingeLossSurvivalSVM` has been dropped. The default solver
  is now ECOS, which was used by cvxpy (the previous default) internally. Therefore,
  results should be identical.
- Dropped the ``presort`` argument from :class:`survivalist.tree.SurvivalTree`
  and :class:`survivalist.ensemble.GradientBoostingSurvivalAnalysis`.
- The ``X_idx_sorted`` argument in :meth:`survivalist.tree.SurvivalTree.fit`
  has been deprecated in scikit-learn 0.24 and has no effect now.
- `predict_cumulative_hazard_function` and
  `predict_survival_function` of :class:`survivalist.ensemble.RandomSurvivalForest`
  and :class:`survivalist.tree.SurvivalTree` now return an array of
  :class:`survivalist.functions.StepFunction` objects by default.
  Use ``return_array=True`` to get the old behavior.
- Support for Python 3.6 has been dropped.
- Increase minimum supported versions of dependencies. We now require:

   +--------------+-----------------+
   | Package      | Minimum Version |
   +==============+=================+
   | Pandas       | 0.25.0          |
   +--------------+-----------------+
   | scikit-learn | 0.24.0          |
   +--------------+-----------------+
